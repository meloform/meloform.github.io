<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>MeloForm Musical Samples</title>

    <script src="https://unpkg.com/pdfobject@2.2.6/pdfobject.min.js"></script>
    <style>
        .pdfobject-container {
            max-width: 100%;
            width: 700px;
            height: 600px;
            border: 10px solid rgba(0,0,0,.2);
            margin: 0;
        }
    </style>

    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<body style="text-align: left;">
<h1>MeloForm: Generating Melody with Musical Form based on Expert Systems and Neural Networks</h1>

<br>
<h4 style='display:inline'>Abstract: </h4> <p style='display:inline'>Human usually composes music by organizing elements according to the musical form to express music ideas. However, for neural network-based music generation, it is difficult to do so due to the lack of labelled data on musical form. In this paper, we develop MeloForm, a system that generates melody with musical form using expert systems and neural networks. Specifically, 1) we design an expert system to generate a melody by developing musical elements from motifs to phrases then to sections with repetitions and variations according to pre-given musical form; 2) considering the generated melody is lack of musical richness, we design a Transformer based refinement model to improve the melody without changing its musical form. MeloForm enjoys the advantages of precise musical form control by expert systems and musical richness learning via neural models. Both subjective and objective experimental evaluations demonstrate that MeloForm generates melodies with precise musical form control with 97.79% accuracy, and outperforms baseline systems in terms of subjective evaluation score by 0.75, 0.50, 0.86 and 0.89 in structure, thematic, richness and overall quality, without any labelled musical form data. Besides, MeloForm can support various kinds of forms, such as verse and chorus form, rondo form, variational form, sonata form, etc.</p>


<hr>


<p>It is hard for baselines to use the same condition and musical form with MeloForm since they did not explicitly model musical form, so we directly list the audio samples from MeloForm and baselines for comparison.</p>

<table width="86%" border="1">
  <tbody>
    <tr>
      <th width="22%" style="text-align: center" scope="col">Melody from MeloForm</th>
      <th width="26%" style="text-align: center" scope="col">Description</th>
    </tr>
    
    <tr>
      <td width="26%" style="text-align: center">
        <audio controls="controls">
            <source src="./demo/meloform/1-melody.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
      <td width="26%" style="text-align: left">
        <p>Section A: (phrase a1: 00:00-00:09; 00:09-00:17; 00:17-00:25);</p>
        <p>Section B: (phrase b1: 00:25-00:33; 00:33-00:41; 00:41-00:49);</p>
        <p>Section A: (phrase a1: 00:49-00:57; 00:57-1:05);</p>
        <p>Section B: (phrase b1: 1:05-1:13; 1:13-1:21);</p>
        <p>Section A: (phrase a1: 1:21-1:29; 1:29-1:39).</p>
    </tr>
    <tr>
      <td width="26%" style="text-align: center">
        <audio controls="controls">
            <source src="./demo/meloform/2-melody.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
      <td width="26%" style="text-align: left">
        <p>Section A: (phrase a1: 00:00-00:07; 00:07-00:15);</p>
        <p>Section B: (phrase b1: 00:15-00:23; 00:23-00:31);</p>
        <p>Section A: (phrase a1: 00:31-00:39; 00:39-00:47);</p>
    </tr>
    <tr>
      <td width="26%" style="text-align: center">
        <audio controls="controls">
            <source src="./demo/meloform/3-melody.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
      <td width="26%" style="text-align: left">
        <p>Section A: (phrase a1: 00:00-00:07; 00:07-00:15; 00:15-00:23; 00:23-00:31);</p>
        <p>Section B: (phrase b1: 00:31-00:39; 00:39-00:47; 00:47-00:54);</p>
        <p>Section A: (phrase a1: 00:54-01:03; 1:03-1:11; 1:19-1:29);</p>
    </tr>
  </tbody>
</table>

<hr>

<table width="86%" border="1">
  <tbody>
    <tr>
      <th width="22%" style="text-align: center" scope="col">Melody from Music Transformer</th>
      <th width="26%" style="text-align: center" scope="col">Description</th>
    </tr>
    
    <tr>
      <td width="26%" style="text-align: center">
        <audio controls="controls">
            <source src="./demo/music_transformer/1-melody.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
      <td width="26%" style="text-align: left">
        <p>Section A: (phrase a1: 00:00-00:09);</p>
        <p>Section B: (phrase b1: 00:09-00:15);</p>
        <p>And section B gets repeated until the end.</p>
    </tr>
    <tr>
      <td width="26%" style="text-align: center">
        <audio controls="controls">
            <source src="./demo/music_transformer/2-melody.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
      <td width="26%" style="text-align: left">
        <p>Section A: (phrase a1: 00:00-00:04; 00:04-00:08);</p>
        <p>Section B: (phrase b1: 00:08-00:12);</p>
        <p>Section C: (phrase b1: 00:12-00:15);</p>
        <p>And section C gets repeated until the end.</p>
    </tr>
    <tr>
      <td width="26%" style="text-align: center">
        <audio controls="controls">
            <source src="./demo/music_transformer/3-melody.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
      <td width="26%" style="text-align: left">
        <p>Section A: (phrase a1: 00:00-00:03; 00:04-00:06);</p>
        <p>Section B: (phrase b1: 00:06-00:18);</p>
        <p>Section C: (phrase b1: 00:18-00:26);</p>
        <p>And section C gets repeated until the end.</p>
    </tr>
    <tr>
        <td width="26%" style="text-align: center">
            <p>Conclusions</p>

        <td width="26%" style="text-align: center">
            <p>Although music transformer captures the repetitive patterns, but there are too much (the remaining parts are almost the repetitions.). And inside the phrases, it is hard to figure out the theme.</p>
    </tr>
  </tbody>
</table>


<hr>


<table width="86%" border="1">
  <tbody>
    <tr>
      <th width="22%" style="text-align: center" scope="col">Melody from MELONS</th>
      <th width="26%" style="text-align: center" scope="col">Description</th>
    </tr>
    
    <tr>
      <td width="26%" style="text-align: center">
        <p>prime</p>
        <audio controls="controls">
            <source src="./demo/melons/1-prime.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
        <p>melody continuing the prime</p>
        <audio controls="controls">
            <source src="./demo/melons/1-melody.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
      <td width="26%" style="text-align: left">
        <p>Prime: 00:00-00:17;</p>
        <p>The remaining part divergent from this prime in the following generated parts.</p>
    </tr>
    <tr>
      <td width="26%" style="text-align: center">
        <p>prime</p>
        <audio controls="controls">
            <source src="./demo/melons/2-prime.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
        <p>melody continuing the prime</p>
        <audio controls="controls">
            <source src="./demo/melons/2-melody.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
      <td width="26%" style="text-align: left">
        <p>Prime: 00:00-00:17;</p>
        <p>The remaining part divergent from this prime in the following generated parts.</p>
    </tr>
    <tr>
      <td width="26%" style="text-align: center">
        <p>prime</p>
        <audio controls="controls">
            <source src="./demo/melons/3-prime.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
        <p>melody continuing the prime</p>
        <audio controls="controls">
            <source src="./demo/melons/3-melody.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
      <td width="26%" style="text-align: left">
        <p>Prime: 00:00-00:17;</p>
        <p>The prime is repeated with much variations right after the first 8 bars. And There are two repetitive patterns: 1) 00:34-00:46, 01:18-01:30; 2) 00:50-00:58, 01:06-01:16. None of them has the characteristic of the prime<p>
        <p>Although there are some repetitive patterns, the prime is lost in the following generated parts, the theme is not obvious.</p>
    </tr>
    <tr>
        <td width="26%" style="text-align: center">
            <p>Conclusions</p>

        <td width="26%" style="text-align: left">
        <p>The first 8 bars are the given prime from human composed fragments. Although MELONS explicitly construct bar-level structure graph, the motif seems to be lost when distance is too long.</p>
    </tr>
  </tbody>
</table>

<hr>

<table width="86%" border="1">
  <tbody>
    <tr>
      <th width="22%" style="text-align: center" scope="col">Melody from POP909_lm>
      <th width="26%" style="text-align: center" scope="col">Description</th>
    </tr>
    
    <tr>
      <td width="26%" style="text-align: center">
        <audio controls="controls">
            <source src="./demo/pop909_lm/1-melody.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
      <td width="26%" style="text-align: left">
        <p>Section A: (phrase a1: 00:00-00:08);</p>
        <p>Section B: (phrase b1: 00:08-00:16; 00:16-00:24; 00:24-00:32; 00:32-00:40);</p>
        <p>Section A: (phrase a1: 00:40-00:48);</p>
        <p>Section A: (phrase b1: 00:48-00ï¼š56; 00:56-1:04);</p>
    </tr>
    <tr>
      <td width="26%" style="text-align: center">
        <audio controls="controls">
            <source src="./demo/pop909_lm/2-melody.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
      <td width="26%" style="text-align: left">
        <p>Section A: (phrase a1: 00:00-00:04; 00:04-00:08);</p>
        <p>Section B: (phrase b1: 00:08-00:12);</p>
        <p>Section C: (phrase b1: 00:12-00:15);</p>
        <p>And section C gets repeated until the end.</p>
    </tr>
    <tr>
      <td width="26%" style="text-align: center">
        <audio controls="controls">
            <source src="./demo/pop909_lm/3-melody.mp3" autoplay="">Your browser does not support the audio element.
        </audio>
      <td width="26%" style="text-align: left">
        <p>Section A: (phrase a1: 00:00-00:03; 00:04-00:06);</p>
        <p>Section B: (phrase b1: 00:06-00:18);</p>
        <p>Section C: (phrase b1: 00:18-00:26);</p>
        <p>And section C gets repeated until the end.</p>
    </tr>
    <tr>
        <td width="26%" style="text-align: center">
            <p>Conclusions</p>

        <td width="26%" style="text-align: left">
        <p>Although pop909_lm can control musical form in some degree, different sections are similar, and the theme is not obvious.</p>
    </tr>
  </tbody>
</table>



<p>Samples in mp3 and midi version can be found at:   </p>
<p><a href="https://github.com/meloform/meloform.github.io/tree/main/demo"> DEMO </a></p>

<hr>


<p>Below is the music samples from MeloForm that extends to musical form variations.</p>

<h4>Example 1: <p style='display:inline'>Verse and Chorus Form: \(A(a_{1}a_{1}a_{1})B(b_{1}b_{1}b_{1})A(a_{1}a_{1})B(b_{1}b_{1})A(a_{1}a_{1})\)</p></h4>




<div id="meloform_example1">If you don't have Adobe Reader or PDF support in this web
    browser. <a href="./demo/meloform_variation/verse_chorus/1-melody.pdf">Click here to download the PDF</a></div>

<script>
    PDFObject.embed("./demo/meloform_variation/verse_chorus/1-melody.pdf", "#meloform_example1");
</script>


<h5>Melody</h5>
<audio controls="controls">
    <source src="./demo/meloform_variation/verse_chorus/1-melody.mp3" autoplay="">Your browser does not support the audio element.
</audio>


<h5>Melody + Accompaniment</h5>
<audio controls="controls">
    <source src="./demo/meloform_variation/verse_chorus/1-twist.mp3" autoplay="">Your browser does not support the audio element.
</audio>

<h5>Piano Roll Representation</h5>
<img src="./demo/meloform_variation/verse_chorus/1-pianoroll.svg" alt="Here is the piano roll for the melody." style="width:700px;height:100%;">

<br>
<br>

<h5 style='display:inline'>Musical Form Analysis:</h5> <p> This is a melody with musical form as \(A(a_{1}a_{1}a_{1})B(b_{1}b_{1}b_{1})A(a_{1}a_{1})B(b_{1}b_{1})A(a_{1}a_{1})\), where \(A\) represents verse and \(B\) represents chorus. As seen in the piano roll representation, the average pitch in chorus is much higher than that in verse, and the rhythm pattern is more intense in chorus by having more note density.</p>
<p>Development of \(a_{1})\: </p>
